---
title: "从工具到产品：8MB Video Compressor 的蜕变 (v1.0 -> v1.3)"
date: 2025-12-09
category: tech
tags: [Python, FFmpeg, CustomTkinter, H.265, DevLog]
description: "记录一次深度迭代：如何通过 H.265 硬件编码、雅致灰 UI 重构和融合剪辑功能，将一个简单的 Python 脚本打造为专业级视频压缩工具。"
coverImage: /images/8mb-compressor-v1.3-cover.svg
featured: true
author: WeiWei
---

# 引言

今天对我的个人项目 `8MB Video Compressor` 进行了一次马拉松式的迭代。从最初的一个简单脚本，进化成了现在的 **v1.3 专业版**。这不仅仅是功能的堆砌，更是对用户体验 (UX) 和视觉质感 (UI) 的一次极致追求。

## 🚀 v1.1：内核觉醒与雅致新生

### 1. H.265 (HEVC) 硬件加速
为了榨干 GTX 1660 的性能，我在 `Engine` 层引入了 `hevc_nvenc` 支持。
- **效果**：同画质下体积减少约 **40%**。
- **逻辑**：增加了自动回退机制，如果检测不到 NVIDIA 显卡，会自动降级为 H.264，保证兼容性。

### 2. "雅致灰" (Elegant Gray) 主题
抛弃了 Python 原生丑陋的 GUI，基于 `CustomTkinter` 定制了一套名为 **Elegant Gray** 的主题系统。
- **色板**：深色模式下使用 `#1a1a1a` 搭配 `#2d2d2d`，营造高级感。
- **交互**：完全重构了 `app.py`，改为 **线性工作流 (Linear Workflow)**：导入 -> 分析 -> 剪辑 -> 配置 -> 导出。

## 💎 v1.2：魔鬼在细节 (Ultimate Polish)

在 v1.1 的基础上，我又进行了一轮"像素级"的打磨。

- **仪表盘重构**：将原本简陋的文本信息改为了 **2x2 Grid** 布局的仪表盘，关键数据（如 `1080p`, `45.2 MB`）使用 **20px Bold** 字体高亮显示。
- **字体优化**：为了解决 Tkinter 在 Windows 下字体发虚的问题，全线强制使用 `Microsoft YaHei UI`，并对关键按钮使用了加粗处理。
- **双主题完善**：修复了明亮模式 (Light Mode) 下按钮颜色过深的问题，现在它在白天也一样清爽迷人。

## ✂️ v1.3：融合剪辑 (Fusion Editing)

这是今天的重头戏。我希望能在一个工具里完成"粗剪 + 压缩"的一条龙服务。

### 功能实现
在 "智能分析" 和 "配置" 之间，插入了全新的 **Step 3: 融合剪辑**。
- **多段保留**：用户可以添加多个想保留的时间段（如 `00:15-00:30` 和 `01:00-01:20`）。
- **动态码率**：目标大小（如 50MB）不再是死板地除以全片时长，而是根据**剪辑后的有效时长**动态计算码率，确保每一比特都用在刀刃上。

### 核心技术：交叉淡化 (Cross Dissolve)
为了避免生硬的切断，我在 `core/utils.py` 中封装了 FFmpeg 的 `filter_complex` 逻辑：

```python
# 自动生成平滑过渡的滤镜链
filters.append(f"[0:v]trim={start}:{end},setpts=PTS-STARTPTS[v{i}]")
# ...
video_xfade = f"{current}{next}xfade=transition=fade:duration=0.5:offset={offset}{out}"
```

这使得拼接出来的视频拥有了专业级的**叠化过渡**效果。

## 结语

此次迭代让我深刻体会到，写代码只是完成功能的 50%，剩下的 50% 在于如何让这些功能以最优雅、最符合直觉的方式呈现给用户。

`8MB Compressor`，现在不仅仅是一个压缩工具，它已经是我数字生活中的得力助手。🚀
