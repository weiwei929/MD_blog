---
title: "从对齐到颗粒度：看板系统开发思考"
date: 2025-12-11
category: tech
tags: [ThinkLog, React, Kanban, Mermaid, Engineering Culture]
description: "记录一次看板系统开发中的思维博弈：如何通过对齐思路、校准颗粒度和引入 Mermaid 可视化，解决业务逻辑断点并提升代码质量。"
coverImage: /images/kanban-thinklog.png
featured: true
author: WeiWei
---

# 2025-12-11 Thinklog：从对齐到颗粒度，再到新武器的思考

## 💡 引言：过程重于结果

昨天（2025-12-11）的开发经历有些特别。如果仅看 Git 的 commit 记录，可能只是几个功能的增加和 Bug 的修复。但当我们回溯整个**提出问题 -> 思考问题 -> 解决问题**的链路时，会发现隐藏在代码之下的思维博弈才是最宝贵的财富。

这一天的关键词是：**对齐思路**、**拉平进度**、**校准颗粒度**，以及**新的武器 Mermaid**。

## 🔄 一、 对齐思路：关于"完结"的哲学

### 1. 提出问题
在看板系统（KanbanBoard）的开发中，我们遇到了一个业务逻辑的断点：当一个项目被拖入"完结归档"（Completed）后，它似乎就进入了一个死胡同。用户无法将其撤回或重新编辑。这在技术上是一个简单的状态机问题，但在产品逻辑上，它引发了我们对"完结"定义的思考。

### 2. 思考过程
*   **初期的僵局**：简单的做法是允许反向拖拽。但"完结"作为一个严肃的状态，是否应该允许随意的进出？
*   **思路的对齐**：通过讨论，我们意识到写作是一个动态过程。"完结"可能只是暂时的，作者经常需要对已发布的作品进行修订。因此，系统必须提供"后悔药"。
*   **Mermaid 的介入**：在这个阶段，我们开始意识到单纯的文字描述状态流转容易产生歧义。虽然昨天代码中没有直接体现大规模的图表，但这种对逻辑可视化的渴望，为引入 Mermaid 埋下了伏笔。

### 3. 解决问题
我们最终在 UI 上增加了一个明确的 "Return to Edit"（重开）动作，而不仅仅是依赖拖拽。
*   **技术实现**：在 `CanbanBoard.tsx` 中，我们特意为 Completed 列增加了 `onStatusChange` 的回调，允许将其状态重置为 `draft`。
*   **心得**：**"对齐"不仅仅是和需求文档对齐，更是和用户的真实心理模型对齐。**

## 📏 二、 校准颗粒度：Lint 是一面镜子

### 1. 提出问题
在处理 `ProjectCard.tsx` 时，IDE 抛出了一些 Lint 警告：未使用的变量、未使用的导入（如 `FileText`）。看似是小问题，但它们像是一粒粒沙子，磨损着代码的精致度。

### 2. 思考过程
*   **妥协 vs. 极致**：常见的做法是 `// eslint-disable` 或者视而不见。但我们昨天选择了"死磕"。
*   **颗粒度的校准**：我们开始审视每一个 prop 的存在意义。为什么要有 `collectionName`？为什么引入了 `FileText` 却不用？
*   **发现本质**：未使用的导入往往意味着设计上的冗余或未完成的 UI 构思。

### 3. 解决问题
我们没有简单地删除代码，而是重新审视了 UI 设计：
*   **行动**：既然引入了 `FileText`，说明我们本意是想增强视觉表现。于是我们将其用于显示项目类型，让这个图标"活"了下来。对于无法使用的变量（如看板中的 `s`），则果断清理。
*   **心得**：**"颗粒度"的校准，实际上是对代码意图的二次确认。清理代码的过程，就是清理思维杂质的过程。**

## ⚖️ 三、 拉平进度：各向同性的美学

### 1. 提出问题
我们在前端功能突飞猛进的同时，发现一些周边设施（如 Obsidian 模板、文档）显得有些陈旧和粗糙。这种"贫富差距"会破坏整体的开发体验。

### 2. 思考过程
*   **木桶效应**：一个优秀的项目，不应有明显的短板。即使是辅助工具（Obsidian），也是工作流的重要一环。
*   **审美的统一**：我们注意到 Obsidian 的图标和配色与此时 Web 端现代、清爽的界面不搭。

### 3. 解决问题
我们花时间专门优化了 Obsidian 的模板设计：
*   **行动**：统一配色，重绘扁平化图标。
*   **心得**：**"拉平进度"不只要拉平功能开发的进度，更要拉平"审美"和"体验"的精度。** 每一个接触点都应该传递一致的高质量感。

## 🛠️ 四、 新的武器：Mermaid 与可视化沟通

### 1. 启示
昨天的对话中，我们多次感受到文字在描述复杂状态流转时的无力。这促使我们确立了 Mermaid 在后续架构文档中的核心地位。

### 2. 价值
*   它不仅仅是画图工具，它是一种**Code-First** 的图表语言。
*   它强迫我们在写文档时，依然保持逻辑的严密性（因为逻辑不通，图就画不出来）。

## 📝 总结
2025-12-11 的开发不仅仅是完成了看板的回退功能或修复了几个 Bug。更重要的是，我们建立了一种**"高颗粒度审视、全链路对齐、视觉化辅助"**的开发节奏。

这正是我们在这个阶段最需要的 —— 不仅要走得快，还要走得稳，更要走得优雅。
